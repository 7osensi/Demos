/**
 ******************************************************************************
 * @file           : main.c
 * @author         : Auto-generated by STM32CubeIDE
 * @brief          : Main program body
 ******************************************************************************
 * @attention
 *
 * Copyright (c) 2023 STMicroelectronics.
 * All rights reserved.
 *
 * This software is licensed under terms that can be found in the LICENSE file
 * in the root directory of this software component.
 * If no LICENSE file comes with this software, it is provided AS-IS.
 *
 ******************************************************************************
 */

#include <stdint.h>

#include"stm32f103.h"
#include"Stm32f103_GPIO.h"

void delay()
{
	for(u32 i = 0; i < 500000 / 2; i++);
}

int main(void)
{
	/* Activate RCC for GPIOB */
	GPIOB_PCLK_EN();

	/* Activate RCC for GPIOC */
	GPIOC_PCLK_EN();

	/* Configure SW1 (B11) as input */
	GPIO_PinConfig_t PB_B11 = {11, INPUT_MODE, INPUT_PU_PL_MODE};
	GPIO_Handle_t SW1 = {MGPIOB, PB_B11};
	MCAL_GPIO_Init(&SW1);

	GPIO_PinConfig_t LED_C14 = {14, OUTPUT_10MHZ_MODE, GP_OUTPUT_PU_PL_MODE};
	GPIO_Handle_t LED_BLUE = {MGPIOC, LED_C14};
	MCAL_GPIO_Init(&LED_BLUE);

	MCAL_EXTI_Enable();

    /* Loop forever */
	for(;;) {
		if(MCAL_GPIO_ReadInputPin(MGPIOB, 11) == 0 )
		{
			delay(); /* Eliminate Debouncing */
			MCAL_GPIO_ToggleOutputPin(MGPIOC, 14);
		}
	}
}
